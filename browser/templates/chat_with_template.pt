<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      metal:use-macro="context/@@gs_template/page">
	<head>
    <title metal:fill-slot="title" tal:content="view/title | nothing">The title</title>
    <tal:block metal:fill-slot="javascript">
    <script language="JavaScript" type="text/javascript">
        var djConfig = {
            isDebug: false,
            bindEncoding: "UTF-8",
            baseScriptUri:'/++resource++dojo/'
        };
    </script>
    <script language="JavaScript" type="text/javascript" src="/++resource++dojo/dojo.js"></script>
    <script language="JavaScript" type="text/javascript" src="/++resource++chat.js"></script>

  </tal:block>
  
    <tal:block metal:fill-slot="style">
		<link rel="stylesheet" type="text/css" href="/++resource++chat.css">
    </tal:block>
  </head> 
  <body metal:fill-slot="body" tal:omit-tag="">
       <div id="chatmessagespane">
           <div id="chatmessages"></div>
       </div>
       <div id="chatuserspane">
          
          <h3>Active Users</h3>
          <div id="chatusers">Loading...</div>
          
          <h3>Recent Users</h3>
          <div id="chatpastusers">Loading...</div>
          
       </div>
      <form id="chat_form" method="POST" action="submit_message" ACCEPT_CHARSET="UTF-8">
          <input type="hidden" name="_charset_" />
          <input type="hidden" name="last_timestamp" value="" />
          <input type="hidden" name="last_checksum" value="" />
          <input tal:condition="request/form/user_id | nothing" type="hidden" name="user_id" tal:attributes="value request/form/user_id" />
          <input type="hidden" name="group_id" tal:attributes="value python:request.get('group_id', 'default')" />
          <input class="chatinput" name="message" value="" />
          <input class="chatsubmit" type="submit" name="submit" value="send" />
      </form>

    <div id="dojoDebugOutput"></div>
  </body>
</html>

<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      metal:use-macro="context/@@groupserver_layout/page">
	<head>
    <title metal:fill-slot="title" tal:content="view/title | nothing">The title</title>
    <tal:block metal:fill-slot="javascript">
    <script language="JavaScript" type="text/javascript">
        var djConfig = {
            isDebug: false,
            bindEncoding: "UTF-8",
            baseScriptUri:'/++resource++dojo/'
        };
    </script>
    <script language="JavaScript" type="text/javascript" src="/++resource++date/DP_DateExtensions.js"></script>
    <script language="JavaScript" type="text/javascript" src="/++resource++chat.js"></script>

  </tal:block>
  
    <tal:block metal:fill-slot="style">
		<link rel="stylesheet" type="text/css" 
		  href="/++resource++chat-20071123.css"/>
    </tal:block>
  </head> 
 
  <h1 metal:fill-slot="pagetitle" tal:content="python:'%s Chat' % context.Scripts.get.group_object().title_or_id()"/>

  <body metal:fill-slot="body" tal:omit-tag="">
       <div id="chatmessagespane">
           <div id="chatmessages"></div>
       </div>
       <div id="chatuserspane">
          
          <h3>Active Users</h3>
          <div id="chatusers">Loading...</div>
          
          <h3>Recent Users</h3>
          <div id="chatpastusers">Loading...</div>
          
       </div>
      <form id="chat_form" method="POST" action="submit_message"
        ACCEPT_CHARSET="UTF-8">
        <input type="hidden" name="_charset_" id="_charset_" />
        <input type="hidden" name="last_timestamp" id="last_timesatamp"
          value="" />
        <input type="hidden" name="last_checksum" id="last_checksum" 
          value="" />
        <input  type="hidden" name="user_id" id="user_id" 
          tal:condition="user/getId | request/form/user_id | nothing"
          tal:attributes="value user/getId | request/form/user_id" />
        <input type="hidden" name="group_id" id="group_id"
          tal:attributes="value python:context.Scripts.get.group_object().getId()" />
        <input class="chatinput" name="message" id="message" value="" />
        <input class="chatsubmit" type="submit" id="submit" 
          name="submit" value="send" />
      </form>

    <div id="dojoDebugOutput"></div>
  </body>
</html>
